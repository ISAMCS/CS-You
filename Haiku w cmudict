import random
import nltk
nltk.download('cmudict')
from nltk.corpus import cmudict

d = cmudict.dict()

def count_syllables(word):
    word = word.lower()
    if word in d:
        return max([len([y for y in x if y[-1].isdigit()]) for x in d[word]])
    else:
        return None  # Return None for words not in the dictionary

word_bank = [
    "cherry", "blossom", "mountain", "river", "moon",
    "autumn", "leaf", "whisper", "silence", "bamboo",
    "twilight", "dewdrop", "firefly", "butterfly", "breeze",
    "sunlight", "shadow", "reflection", "serenity", "harmony"
]

new_word1 = input("Insert New Word 1: ")
new_word2 = input("Insert New Word 2: ")
new_word3 = input("Insert New Word 3: ")

# Check if the input is not empty before appending to word_bank.
if new_word1:
    word_bank.append(new_word1)
if new_word2:
    word_bank.append(new_word2)
if new_word3:
  word_bank.append(new_word3)

print("Updated word bank:", word_bank)

valid_words = {word: count_syllables(word) for word in word_bank if count_syllables(word) is not None}
invalid_words = [word for word in word_bank if count_syllables(word) is None]

print("Valid words:")
for word, syllables in valid_words.items():
    print(f"{word}: {syllables} syllables")

print("\nInvalid words:")
for word in invalid_words:
    print(f"{word}: Invalid for haiku")

def generate_haiku_line(target_syllables):
    line = []
    syllable_count = 0
    while syllable_count < target_syllables:
        word = random.choice(list(valid_words.keys()))
        word_syllables = valid_words[word]
        if syllable_count + word_syllables <= target_syllables:
            line.append(word)
            syllable_count += word_syllables
    return " ".join(line)


def generate_haiku(): # Removed word_bank as an argument
    haiku = [
        generate_haiku_line(5),
        generate_haiku_line(7),
        generate_haiku_line(5)
    ]
    return "\n".join(haiku)

haiku = generate_haiku() # Removed word_bank from the function call

if haiku:
    print("Generated Haiku:")
    print(haiku)
else:
    print("Failed to generate a haiku.")
